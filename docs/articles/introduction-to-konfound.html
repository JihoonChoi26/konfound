<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to konfound • konfound</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to konfound">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">konfound</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-to-konfound.html">Introduction to konfound</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jrosen48/konfound">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to konfound</h1>
                        <h4 class="author">Joshua Rosenberg, Ran Xu, and Ken Frank</h4>
            
            <h4 class="date">2019-05-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jrosen48/konfound/blob/master/vignettes/introduction-to-konfound.Rmd"><code>vignettes/introduction-to-konfound.Rmd</code></a></small>
      <div class="hidden name"><code>introduction-to-konfound.Rmd</code></div>

    </div>

    
    
<div id="table-of-contents" class="section level1">
<h1 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of contents</h1>
<ul>
<li>Introduction (1 page)</li>
<li>Background on sensitivity analysis
<ul>
<li>Impact threshold of a confounding variable (1 page)</li>
<li>Percent bias to invalidate an inference (1 page)</li>
</ul>
</li>
<li>Example
<ul>
<li>pkonfound for already-published studies (1)</li>
<li>konfound for models fitted in R (3 pages)</li>
<li>mkonfound for meta-analyses that involve sensitivity analysis (2 pages)</li>
</ul>
</li>
</ul>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>In social science (and educational) research, we often wish to understand how robust inferences about effects are to unobserved (or controlled for) covariates, possible problems with measurement, and other sources of bias. The goal of <code>konfound</code> is to carry out sensitivity analysis to help analysts to <em>quantify how robust inferences are to potential sources of bias</em>. This package provides functions based on developments in sensitivity analysis by Frank and colleagues, which previously have been implemented in <code>Stata</code> and through an Excel spreadsheet, in <code>R</code> through the <code>konfound</code> package. In particular, we provide functions for both <em>values from analyses carried out outside of R as well as from models (<code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code>, <code><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm()</a></code>, and <code><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lme4::lmer()</a></code> fit in R)</em> for:</p>
<ul>
<li>Quantifying the bias necessary to alter an inference from the framework of Rubin’s (1974) causal model</li>
<li>The robustness of causal inference in terms of the impact threshold of a confounding variable</li>
</ul>
<p>You can install <code>konfound</code> with the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"konfound"</span>)</code></pre></div>
<p>You can then load konfound with the <code><a href="https://www.rdocumentation.org/packages/base/topics/library">library()</a></code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(konfound)</code></pre></div>
<pre><code>#&gt; Loading konfound
#&gt; Sensitivity analysis as described in Frank, Maroulis, Duong, and Kelcey (2013) and in Frank (2000).
#&gt; For more information visit http://konfound-it.com.</code></pre>
<div id="use-of-pkonfound-for-values-from-an-already-conducted-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#use-of-pkonfound-for-values-from-an-already-conducted-analysis" class="anchor"></a>Use of pkonfound() for values from an already-conducted analysis</h2>
<p><code><a href="../reference/pkonfound.html">pkonfound()</a></code> is used when we have values from an already-conducted analysis (like a regression analysis), such as one in an already-published study or from an analysis carried out using other software.</p>
<p>In the case of a regression analysis, values from the analysis would simply be used as the inputs to the <code><a href="../reference/pkonfound.html">pkonfound()</a></code> function. For example, in the use below, we simply enter the values for the estimated effect (an unstandardardized beta coefficient) (<code>2</code>), its standard error (<code>.4</code>), the sample size (<code>100</code>), and the number of covariates (<code>3</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(<span class="dv">2</span>, .<span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">3</span>)
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To invalidate an inference, 60.3% of the estimate would have to be due to bias. This is based on a threshold of 0.794 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To invalidate an inference, 60 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.568 with the outcome and at 0.568 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of 0.201 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.568 X 0.568 = 0.323 to invalidate an inference.</span>
<span class="co">#&gt; For other forms of output, change `to_return` to table, raw_output, thres_plot, or corr_plot.</span>
<span class="co">#&gt; For models fit in R, consider use of konfound().</span></code></pre></div>
<p>For this set of values, around 60% would need to be false due to a source of bias for the inference to be invalidated (based on statistical significance and a p-value (or alpha) of .05), possible a very robust effect. An omitted, confounding variable (sometimes referred to as a covariate) would need to have an impact (defined as the product of the confounding variable’s correlation with both the predictor of interest and the outcome) of 0.323, presenting a different interpretation of how robust this (hypothetical) effect is to a variable which is important but not included in the analysis.</p>
<p>Here is another example, but one in which the unstandardized beta coefficient is smaller than its standard error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(.<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">100</span>, <span class="dv">3</span>)
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To sustain an inference, 89.924% of the estimate would have to be due to bias. This is based on a threshold of 3.97 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To sustain an inference, 90 of the cases with 0 effect would have to be replaced with cases at the threshold of inference.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.387 with the outcome and at 0.387 with the predictor of interest (conditioning on observed covariates) to sustain an inference based on a threshold of 3.97 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.387 X 0.387 = 0.15 to sustain an inference.</span>
<span class="co">#&gt; For other forms of output, change `to_return` to table, raw_output, thres_plot, or corr_plot.</span>
<span class="co">#&gt; For models fit in R, consider use of konfound().</span></code></pre></div>
<p>Note that this use of <code><a href="../reference/pkonfound.html">pkonfound()</a></code> is equivalent to naming the arguments, i.e. for a different set of values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(<span class="dt">est_eff =</span> <span class="op">-</span><span class="fl">2.2</span>,
          <span class="dt">std_err =</span> .<span class="dv">65</span>, 
          <span class="dt">n_obs =</span> <span class="dv">200</span>,
          <span class="dt">n_covariates =</span> <span class="dv">3</span>)
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To invalidate an inference, 41.732% of the estimate would have to be due to bias. This is based on a threshold of -1.282 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To invalidate an inference, 83 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.334 with the outcome and at 0.334 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of -0.14 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.334 X 0.334 = 0.112 to invalidate an inference.</span>
<span class="co">#&gt; For other forms of output, change `to_return` to table, raw_output, thres_plot, or corr_plot.</span>
<span class="co">#&gt; For models fit in R, consider use of konfound().</span></code></pre></div>
<p>We notice that the output includes a message that says we can view other forms of output by changing the <code>to_return</code> argument. Here are the two plots - for the bias necessary to alter an inference (<code>thresh_plot</code>) and for the robustness of an inference in terms of the impact of a confounding variable (<code>corr_plot</code>) that can be returned:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(.<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">100</span>, <span class="dv">3</span>, <span class="dt">to_return =</span> <span class="st">"thresh_plot"</span>)</code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(.<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">100</span>, <span class="dv">3</span>, <span class="dt">to_return =</span> <span class="st">"corr_plot"</span>)</code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>You can also specify multiple forms of output at once.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model_output &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(<span class="dv">2</span>, .<span class="dv">4</span>, <span class="dv">200</span>, <span class="dv">3</span>, <span class="dt">to_return =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"raw_output"</span>, <span class="st">"thresh_plot"</span>, <span class="st">"corr_plot"</span>))
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To invalidate an inference, 60.557% of the estimate would have to be due to bias. This is based on a threshold of 0.789 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To invalidate an inference, 121 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.479 with the outcome and at 0.479 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of 0.14 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.479 X 0.479 = 0.229 to invalidate an inference.</span>
<span class="co">#&gt; Print output created by default. Created 3 other forms of output. Use list indexing or run summary() on the output to see how to access.</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(model_output)
<span class="co">#&gt; Created 3 forms of output. To access type: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; model_output$raw_output</span>
<span class="co">#&gt; model_output$thresh_plot</span>
<span class="co">#&gt; model_output$corr_plot</span></code></pre></div>
<p>When we type the name of the object, we see that we created three types of output that we can access as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model_output<span class="op">$</span>raw_output
<span class="co">#&gt; # A tibble: 1 x 8</span>
<span class="co">#&gt;   action inference percent_bias_to… replace_null_ca… unstd_beta</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 to_in… reject_n…             60.6              121          2</span>
<span class="co">#&gt; # … with 3 more variables: beta_threshhold &lt;dbl&gt;,</span>
<span class="co">#&gt; #   omitted_variable_corr &lt;dbl&gt;, itcv &lt;dbl&gt;</span>
model_output<span class="op">$</span>thresh_plot</code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model_output<span class="op">$</span>corr_plot</code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-9-2.png" width="700"></p>
<p>Finally, you can return the raw output, for use in other analyses.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/pkonfound.html">pkonfound</a></span>(.<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">100</span>, <span class="dv">3</span>, <span class="dt">to_return =</span> <span class="st">"raw_output"</span>)
<span class="co">#&gt; # A tibble: 1 x 8</span>
<span class="co">#&gt;   action inference percent_bias_to… replace_null_ca… unstd_beta</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 to_su… fail_to_…             89.9               90        0.4</span>
<span class="co">#&gt; # … with 3 more variables: beta_threshhold &lt;dbl&gt;,</span>
<span class="co">#&gt; #   omitted_variable_corr &lt;dbl&gt;, itcv &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="use-of-konfound-for-models-fit-in-r" class="section level2">
<h2 class="hasAnchor">
<a href="#use-of-konfound-for-models-fit-in-r" class="anchor"></a>Use of konfound() for models fit in R</h2>
<p>Where <code><a href="../reference/pkonfound.html">pkonfound()</a></code> can be used with values from already-conducted analyses, <code><a href="../reference/konfound.html">konfound()</a></code> can be used with models (<code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code>, <code><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm()</a></code>, and <code><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lme4::lmer()</a></code>) fit in R.</p>
<p><strong>For linear models fit with lm()</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span>wt <span class="op">+</span><span class="st"> </span>hp <span class="op">+</span><span class="st"> </span>qsec, <span class="dt">data =</span> mtcars)
m1
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = mpg ~ wt + hp + qsec, data = mtcars)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt; (Intercept)           wt           hp         qsec  </span>
<span class="co">#&gt;    27.61053     -4.35880     -0.01782      0.51083</span>

<span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m1, hp)
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To sustain an inference, 41.327% of the estimate would have to be due to bias. This is based on a threshold of -0.031 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To sustain an inference, 13 of the cases with 0 effect would have to be replaced with cases at the threshold of inference.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.322 with the outcome and at 0.322 with the predictor of interest (conditioning on observed covariates) to sustain an inference based on a threshold of -0.031 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.322 X 0.322 = 0.104 to sustain an inference.</span>
<span class="co">#&gt; For more detailed output, consider setting `to_return` to table</span>
<span class="co">#&gt; To consider other predictors of interest, consider setting `test_all` to TRUE.</span></code></pre></div>
<p>Like with <code><a href="../reference/pkonfound.html">pkonfound()</a></code>, we can also output multiple forms of output at once with <code><a href="../reference/konfound.html">konfound()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">konfound_output &lt;-<span class="st"> </span><span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m1, hp, <span class="dt">to_return =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"raw_output"</span>, <span class="st">"thresh_plot"</span>, <span class="st">"corr_plot"</span>))
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To sustain an inference, 41.327% of the estimate would have to be due to bias. This is based on a threshold of -0.031 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To sustain an inference, 13 of the cases with 0 effect would have to be replaced with cases at the threshold of inference.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.322 with the outcome and at 0.322 with the predictor of interest (conditioning on observed covariates) to sustain an inference based on a threshold of -0.031 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.322 X 0.322 = 0.104 to sustain an inference.</span>
<span class="co">#&gt; Print output created by default. Created 3 other forms of output. Use list indexing or run summary() on the output to see how to access.</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(konfound_output)
<span class="co">#&gt; Created 3 forms of output. To access type: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; konfound_output$raw_output</span>
<span class="co">#&gt; konfound_output$thresh_plot</span>
<span class="co">#&gt; konfound_output$corr_plot</span></code></pre></div>
<p>Again, we can type each of those, i.e.:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">konfound_output<span class="op">$</span>raw_output
<span class="co">#&gt; # A tibble: 1 x 8</span>
<span class="co">#&gt;   action inference percent_bias_to… replace_null_ca… unstd_beta</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 to_su… fail_to_…             41.3               13     -0.018</span>
<span class="co">#&gt; # … with 3 more variables: beta_threshhold &lt;dbl&gt;,</span>
<span class="co">#&gt; #   omitted_variable_corr &lt;dbl&gt;, itcv &lt;dbl&gt;</span>
konfound_output<span class="op">$</span>thresh_plot</code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>We can also test all of the variables as predictors of interest:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m1, wt, <span class="dt">test_all =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; Note that this output is calculated based on the correlation-based approach used in mkonfound()</span>
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   var_name     t    df action   inference   pct_bias_to_chang…   itcv r_con</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;                    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 wt       -5.79    29 to_inva… reject_null               51.5  0.585 0.765</span>
<span class="co">#&gt; 2 hp       -1.2     29 to_sust… fail_to_re…               38.7 -0.102 0.319</span>
<span class="co">#&gt; 3 qsec      1.16    29 to_sust… fail_to_re…               40.5 -0.106 0.326</span></code></pre></div>
<p>Whereas this cannot be carried out with <code><a href="../reference/pkonfound.html">pkonfound()</a></code>, with <code><a href="../reference/konfound.html">konfound()</a></code> you can also return a table with some key output from the correlation-based approach.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m1, wt, <span class="dt">to_return =</span> <span class="st">"table"</span>)
<span class="co">#&gt; Dependent variable is mpg</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'itcv'.</span>
<span class="co">#&gt; Warning: Unknown or uninitialised column: 'impact'.</span>
<span class="co">#&gt; # A tibble: 4 x 7</span>
<span class="co">#&gt;   term        estimate std.error statistic p.value   itcv impact</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 (Intercept)   27.6       8.42       3.28   0.003 NA     NA    </span>
<span class="co">#&gt; 2 wt            -4.36      0.753     -5.79   0      0.243 NA    </span>
<span class="co">#&gt; 3 hp            -0.018     0.015     -1.19   0.244 NA      0.511</span>
<span class="co">#&gt; 4 qsec           0.511     0.439      1.16   0.255 NA      0.073</span></code></pre></div>
<p>If the impact threshhold is greater than the impacts of the <code>Z</code>s (the other covariates) then an omitted variable would have to have a greater impact than any of the observed covariates to change the inference. Note that in fields in which there is a lot known about covariates given the outcome of interest, then the omitted ones are likely less important than those that are known an included (i.e., we have a good sense of the factors that matter in terms of educational achievement).</p>
<p><strong>For generalized linear models fit with glm()</strong></p>
<p>Effects for these models are interpreted on the basis of average partial (or marginal) effects (calculated using the <code>margins</code> package).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># if forcats is not installed, this install it first using install.packages("forcats") for this to run</span>
<span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ns-load">requireNamespace</a></span>(<span class="st">"forcats"</span>)) {
    d &lt;-<span class="st"> </span>forcats<span class="op">::</span>gss_cat
    
    d<span class="op">$</span>married &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(d<span class="op">$</span>marital <span class="op">==</span><span class="st"> "Married"</span>, <span class="dv">1</span>, <span class="dv">0</span>)
    
    m2 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm</a></span>(married <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> d, <span class="dt">family =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/family">binomial</a></span>(<span class="dt">link =</span> <span class="st">"logit"</span>))
    <span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m2, age)
}
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To sustain an inference, 80.978% of the estimate would have to be due to bias. This is based on a threshold of 0.013 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To sustain an inference, 17334 of the cases with 0 effect would have to be replaced with cases at the threshold of inference.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 5.535 with the outcome and at 5.535 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of 1.003 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 5.535 X 5.535 = 30.636 to invalidate an inference.</span>
<span class="co">#&gt; NULL</span></code></pre></div>
<p>As with models fit with <code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code> (and use of <code><a href="../reference/pkonfound.html">pkonfound()</a></code>), multiple forms of output can be specified with the <code>to_return</code> argument to <code><a href="../reference/konfound.html">konfound()</a></code>, i.e. <code><a href="../reference/konfound.html">konfound(m2, age, to_return = c("raw_output", "corr_plot", "thresh_plot"))</a></code>.</p>
<p><strong>For mixed effects (or multi-level) models fit with the lmer() function from the lme4 package</strong></p>
<p><code>konfound</code> also works with models fit with the <code><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lmer()</a></code> function from the package <code>lme4</code>, for mixed-effects or multi-level models. One challenge with carrying out sensitivity analysis for fixed effects in mixed effects models is calculating the correct denominator degrees of freedom for the t-test associated with the coefficients. This is not unique to sensitivity analysis, as, for example, <code><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lmer()</a></code> does not report degrees of freedom (or p-values) for fixed effects predictors (see this information in the <code>lme4</code> FAQ <a href="http://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#why-doesnt-lme4-display-denominator-degrees-of-freedomp-values-what-other-options-do-i-have">here</a>). While it may be possible to determine the correct degrees of freedom for some models (i.e., models with relatively simple random effects structures), it is difficult to generalize this approach, and so in this package the Kenward-Roger approximation for the denominator degrees of freedom as implemented in the <code>pbkrtest</code> package (described in <a href="https://www.jstatsoft.org/htaccess.php?volume=59&amp;type=i&amp;issue=09&amp;paper=true">Halekoh and Højsgaard, 2014</a>).</p>
<p>Here is an example of the use of <code><a href="../reference/konfound.html">konfound()</a></code> with a model fit with <code><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lmer()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ns-load">requireNamespace</a></span>(<span class="st">"lme4"</span>)) {
    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(lme4)
    m3 &lt;-<span class="st"> </span>fm1 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/lme4/topics/lmer">lmer</a></span>(Reaction <span class="op">~</span><span class="st"> </span>Days <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>Subject), sleepstudy)
    <span class="kw"><a href="../reference/konfound.html">konfound</a></span>(m3, Days)
}
<span class="co">#&gt; Loading required package: Matrix</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding factor and character vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Warning in bind_rows_(x, .id): binding character and factor vector,</span>
<span class="co">#&gt; coercing into character vector</span>
<span class="co">#&gt; Percent Bias Necessary to Invalidate the Inference:</span>
<span class="co">#&gt; To invalidate an inference, 84.83% of the estimate would have to be due to bias. This is based on a threshold of 1.588 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; To invalidate an inference, 137 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Impact Threshold for a Confounding Variable:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.817 with the outcome and at 0.817 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of 0.155 for statistical significance (alpha = 0.05).</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.817 X 0.817 = 0.667 to invalidate an inference.</span>
<span class="co">#&gt; Note that the Kenward-Roger approximation is used to estimate degrees of freedom for the predictor(s) of interest. We are presently working to add other methods for calculating the degrees of freedom for the predictor(s) of interest. If you wish to use other methods now, consider those detailed here: https://bbolker.github.io/mixedmodels-misc/glmmFAQ.html#why-doesnt-lme4-display-denominator-degrees-of-freedomp-values-what-other-options-do-i-have. You can then enter degrees of freedom obtained from another method along with the coefficient, number of observations, and number of covariates to the pkonfound() function to quantify the robustness of the inference.</span>
<span class="co">#&gt; NULL</span></code></pre></div>
</div>
<div id="use-of-mkonfound-for-meta-analyses-that-include-sensitivity-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#use-of-mkonfound-for-meta-analyses-that-include-sensitivity-analysis" class="anchor"></a>Use of mkonfound() for meta-analyses that include sensitivity analysis</h2>
<p>We can also use <code>konfound</code> to carry out sensitivity analysis as part of meta-analyses. For example, here, <code>d</code> represents output from a number (30 in this case) of past studies, read in a CSV file from a website:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/read.table">read.csv</a></span>(<span class="st">"https://msu.edu/~kenfrank/example%20dataset%20for%20mkonfound.csv"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(d)
<span class="co">#&gt;           t  df</span>
<span class="co">#&gt; 1  7.076763 178</span>
<span class="co">#&gt; 2  4.127893 193</span>
<span class="co">#&gt; 3  1.893137  47</span>
<span class="co">#&gt; 4 -4.166395 138</span>
<span class="co">#&gt; 5 -1.187599  97</span>
<span class="co">#&gt; 6  3.585478  87</span>
<span class="kw"><a href="../reference/mkonfound.html">mkonfound</a></span>(d, t, df)
<span class="co">#&gt; # A tibble: 30 x 7</span>
<span class="co">#&gt;         t    df action     inference     pct_bias_to_change_i…   itcv r_con</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1  7.08    178 to_invali… reject_null                   68.8   0.378 0.614</span>
<span class="co">#&gt;  2  4.13    193 to_invali… reject_null                   50.6   0.168 0.41 </span>
<span class="co">#&gt;  3  1.89     47 to_sustain fail_to_reje…                  5.47 -0.012 0.11 </span>
<span class="co">#&gt;  4 -4.17    138 to_invali… reject_null                   50.3   0.202 0.449</span>
<span class="co">#&gt;  5 -1.19     97 to_sustain fail_to_reje…                 39.4  -0.065 0.255</span>
<span class="co">#&gt;  6  3.59     87 to_invali… reject_null                   41.9   0.19  0.436</span>
<span class="co">#&gt;  7  0.282   117 to_sustain fail_to_reje…                 85.5  -0.131 0.361</span>
<span class="co">#&gt;  8  2.55     75 to_invali… reject_null                   20.6   0.075 0.274</span>
<span class="co">#&gt;  9 -4.44    137 to_invali… reject_null                   53.0   0.225 0.475</span>
<span class="co">#&gt; 10 -2.05    195 to_invali… reject_null                    3.51  0.006 0.077</span>
<span class="co">#&gt; # … with 20 more rows</span></code></pre></div>
<p>We can also return a plot summarizing the percent bias needed to sustan or invalidate an inference across all of the past studies:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/mkonfound.html">mkonfound</a></span>(d, t, df, <span class="dt">return_plot =</span> T)
<span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></code></pre></div>
<p><img src="introduction-to-konfound_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
</div>
<div id="other-information" class="section level1">
<h1 class="hasAnchor">
<a href="#other-information" class="anchor"></a>Other information</h1>
<div id="how-to-learn-more-about-sensitivity-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#how-to-learn-more-about-sensitivity-analysis" class="anchor"></a>How to learn more about sensitivity analysis</h3>
<p>To learn more about sensitivity analysis, please visit:</p>
<ul>
<li>The <a href="https://jrosen48.github.io/konfound/articles/Introduction_to_konfound.html">Introduction to konfound vignette</a>, with detailed information about each of the functions (<code><a href="../reference/pkonfound.html">pkonfound()</a></code>, <code><a href="../reference/konfound.html">konfound()</a></code>, and <code>mkounfound()</code>)</li>
<li>The causal inference section of Ken Frank’s website <a href="https://msu.edu/~kenfrank/research.htm#causal">here</a>
</li>
<li>The <a href="https://jmichaelrosenberg.shinyapps.io/shinykonfound/">konfound interactive web application</a>, with links to PowerPoints and key publications</li>
</ul>
</div>
<div id="feedback-issues-and-feature-requests" class="section level3">
<h3 class="hasAnchor">
<a href="#feedback-issues-and-feature-requests" class="anchor"></a>Feedback, issues, and feature requests</h3>
<p><code>konfound</code> is actively under development as of January, 2018. We welcome feedback and requests for improvement. We prefer for issues to be filed via GitHub (link to the issues page for <code>konfound</code> <a href="https://github.com/jrosen48/konfound/issues">here</a>) though we also welcome questions or feedback via <a href="jrosen@msu.edu">email</a>.</p>
</div>
<div id="code-of-conduct" class="section level3">
<h3 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h3>
<p>Please note that this project is released with a Contributor Code of Conduct available at <a href="http://contributor-covenant.org/version/1/0/0/" class="uri">http://contributor-covenant.org/version/1/0/0/</a></p>
</div>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h3>
<ul>
<li><p>Frank, K.A., Maroulis, S., Duong, M., and Kelcey, B. 2013. What would it take to change an inference?: Using Rubin’s causal model to interpret the robustness of causal inferences. <em>Education, Evaluation and Policy Analysis</em>. Vol 35: 437-460. <a href="https://msu.edu/~kenfrank/What%20would%20it%20take%20to%20Change%20an%20Inference%20published.docx">https://msu.edu/~kenfrank/What%20would%20it%20take%20to%20Change%20an%20Inference%20published.docx</a></p></li>
<li><p>Frank, K.A., Gary Sykes, Dorothea Anagnostopoulos, Marisa Cannata, Linda Chard, Ann Krause, Raven McCrory. 2008. Extended influence: National Board Certified Teachers as help providers. <em>Education, Evaluation, and Policy Analysis</em>. Vol 30(1): 3-30. <a href="https://msu.edu/~kenfrank/papers/Does%20NBPTS%20Certification%20Affect%20the%20Number%20of%20Colleagues%20a%20Teacher%20Helps%20with%20Instructional%20Matters%20acceptance%20version%202.doc">https://msu.edu/~kenfrank/papers/Does%20NBPTS%20Certification%20Affect%20the%20Number%20of%20Colleagues%20a%20Teacher%20Helps%20with%20Instructional%20Matters%20acceptance%20version%202.doc</a></p></li>
<li><p>Frank, K. A. and Min, K. 2007. Indices of Robustness for Sample Representation. <em>Sociological Methodology</em>. Vol 37, 349-392. <a href="https://msu.edu/~kenfrank/papers/INDICES%20OF%20ROBUSTNESS%20TO%20CONCERNS%20REGARDING%20THE%20REPRESENTATIVENESS%20OF%20A%20SAMPLE.doc">https://msu.edu/~kenfrank/papers/INDICES%20OF%20ROBUSTNESS%20TO%20CONCERNS%20REGARDING%20THE%20REPRESENTATIVENESS%20OF%20A%20SAMPLE.doc</a> (co first authors)</p></li>
<li><p>Frank, K. 2000. “Impact of a Confounding Variable on the Inference of a Regression Coefficient.” <em>Sociological Methods and Research</em>, 29(2), 147-194 <a href="https://msu.edu/~kenfrank/papers/impact%20of%20a%20confounding%20variable.pdf">https://msu.edu/~kenfrank/papers/impact%20of%20a%20confounding%20variable.pdf</a></p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#table-of-contents">Table of contents</a></li>
      <li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#use-of-pkonfound-for-values-from-an-already-conducted-analysis">Use of pkonfound() for values from an already-conducted analysis</a></li>
      <li><a href="#use-of-konfound-for-models-fit-in-r">Use of konfound() for models fit in R</a></li>
      <li><a href="#use-of-mkonfound-for-meta-analyses-that-include-sensitivity-analysis">Use of mkonfound() for meta-analyses that include sensitivity analysis</a></li>
      </ul>
</li>
      <li><a href="#other-information">Other information</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joshua M Rosenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
