<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sensitivity analysis based on Rubin's causal model • konfound</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">konfound</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="konfound" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#konfound" class="anchor"></a>konfound</h1></div>
<p>The goal of konfound is to carry out sensitivity analysis as described in Frank, Maroulis, Duong, and Kelcey (2013) based on Rubin’s (1974) causal model as well as in Frank (2000) based on the impact threshold for a confounding variable.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>You can install konfound from GitHub with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"jrosen48/konfound"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(konfound)</code></pre></div>
<pre><code>#&gt; Loading konfound
#&gt; Sensitivity analysis as described in Frank, Maroulis, Duong, and Kelcey (2013) and in Frank (2000).
#&gt; For more information visit https://jmichaelrosenberg.shinyapps.io/shinykonfound/.</code></pre>
</div>
<div id="use-of-konfound" class="section level1">
<h1 class="hasAnchor">
<a href="#use-of-konfound" class="anchor"></a>Use of konfound</h1>
<div id="pkonfound-for-published-studies" class="section level4">
<h4 class="hasAnchor">
<a href="#pkonfound-for-published-studies" class="anchor"></a>pkonfound() for published studies</h4>
<p><code><a href="reference/pkonfound.html">pkonfound()</a></code>, for published studies, calculates (1) how much bias there must be in an estimate to invalidate/sustain an inference; (2) the impact of an omitted variable necessary to invalidate/sustain an inference for a regression coefficient:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(konfound)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/pkonfound.html">pkonfound</a></span>(<span class="dv">2</span>, .<span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">3</span>)
<span class="co">#&gt; Replacement of Cases Approach:</span>
<span class="co">#&gt; To invalidate the inference, 60.3% of the estimate would have to be due to bias based on a threshold of 0.794 and statistical significance.</span>
<span class="co">#&gt; To invalidate the inference, 60 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Correlation-based Approach:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.568 with the outcome and at 0.568 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of 0.201 and statistical significance.</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.568 X 0.568 = 0.323 to invalidate an inference.</span></code></pre></div>
</div>
<div id="konfound-for-models-fit-in-r" class="section level4">
<h4 class="hasAnchor">
<a href="#konfound-for-models-fit-in-r" class="anchor"></a>konfound() for models fit in R</h4>
<p><code><a href="reference/konfound.html">konfound()</a></code> calculates the same for models fit in R. For example, here are the coefficients for a linear model fit with <code>lm()</code> using the built-in dataset <code>mtcars</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt <span class="op">+</span><span class="st"> </span>hp, <span class="dt">data =</span> mtcars)
m1
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = mpg ~ wt + hp, data = mtcars)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt; (Intercept)           wt           hp  </span>
<span class="co">#&gt;    37.22727     -3.87783     -0.03177</span>
<span class="kw">summary</span>(m1)
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = mpg ~ wt + hp, data = mtcars)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;    Min     1Q Median     3Q    Max </span>
<span class="co">#&gt; -3.941 -1.600 -0.182  1.050  5.854 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept) 37.22727    1.59879  23.285  &lt; 2e-16 ***</span>
<span class="co">#&gt; wt          -3.87783    0.63273  -6.129 1.12e-06 ***</span>
<span class="co">#&gt; hp          -0.03177    0.00903  -3.519  0.00145 ** </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 2.593 on 29 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.8268, Adjusted R-squared:  0.8148 </span>
<span class="co">#&gt; F-statistic: 69.21 on 2 and 29 DF,  p-value: 9.109e-12</span></code></pre></div>
<p>Sensitivity analysis for the effect for <code>wt</code> on <code>mpg</code> can be carried out as follows, specifying the fitted model object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/konfound.html">konfound</a></span>(m1, wt)
<span class="co">#&gt; Replacement of Cases Approach:</span>
<span class="co">#&gt; To invalidate the inference, 66.664% of the estimate would have to be due to bias based on a threshold of -1.293 and statistical significance.</span>
<span class="co">#&gt; To invalidate the inference, 21 observations would have to be replaced with cases for which the effect is 0.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Correlation-based Approach:</span>
<span class="co">#&gt; An omitted variable would have to be correlated at 0.787 with the outcome and at 0.787 with the predictor of interest (conditioning on observed covariates) to invalidate an inference based on a threshold of -0.36 and statistical significance.</span>
<span class="co">#&gt; Correspondingly the impact of an omitted variable (as defined in Frank 2000) must be 0.787 X 0.787 = 0.619 to invalidate an inference.</span></code></pre></div>
</div>
<div id="mkonfound-for-meta-analyses-including-sensitivity-analysis" class="section level4">
<h4 class="hasAnchor">
<a href="#mkonfound-for-meta-analyses-including-sensitivity-analysis" class="anchor"></a>mkonfound for meta-analyses including sensitivity analysis</h4>
<p>We can use an existing dataset, such as the CSV file <a href="">here</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)

d &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">""</span>)

d &lt;-<span class="st"> </span><span class="kw">select</span>(d, <span class="dt">unstd_beta =</span> ,
            <span class="dt">std_error =</span> ,
            <span class="dt">n_obs =</span> ,
            <span class="dt">n_covs =</span> )

<span class="kw"><a href="reference/mkonfound.html">mkonfound</a></span>(d)</code></pre></div>
<p>We can also use data in <code>R</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)

d &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tribble</span>(
    <span class="op">~</span>unstd_beta, <span class="op">~</span>std_err, <span class="op">~</span>n_obs, <span class="op">~</span>n_covs,
    <span class="dv">2</span>,           .<span class="dv">3</span>,       <span class="dv">70</span>,     <span class="dv">3</span>,
    <span class="dv">10</span>,          <span class="fl">2.9</span>,      <span class="dv">405</span>,    <span class="dv">4</span>,
    <span class="fl">1.7</span>,         <span class="fl">1.5</span>,      <span class="dv">200</span>,    <span class="dv">1</span>
)

<span class="kw"><a href="reference/mkonfound.html">mkonfound</a></span>(d)
<span class="co">#&gt; # A tibble: 3 x 11</span>
<span class="co">#&gt;   unstd_beta std_err n_obs n_covs        action           inference</span>
<span class="co">#&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;         &lt;chr&gt;               &lt;chr&gt;</span>
<span class="co">#&gt; 1        2.0     0.3    70      3 to_invalidate         reject_null</span>
<span class="co">#&gt; 2       10.0     2.9   405      4 to_invalidate         reject_null</span>
<span class="co">#&gt; 3        1.7     1.5   200      1    to_sustain fail_to_reject_null</span>
<span class="co">#&gt; # ... with 5 more variables: percent_bias_to_change_inference &lt;dbl&gt;,</span>
<span class="co">#&gt; #   replace_null_cases &lt;dbl&gt;, beta_threshhold &lt;dbl&gt;,</span>
<span class="co">#&gt; #   omitted_variable_corr &lt;dbl&gt;, itcv &lt;dbl&gt;</span></code></pre></div>
</div>
</div>
<div id="other-information" class="section level1">
<h1 class="hasAnchor">
<a href="#other-information" class="anchor"></a>Other information</h1>
<div id="how-to-learn-more-about-sensitivity-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-learn-more-about-sensitivity-analysis" class="anchor"></a>How to learn more about sensitivity analysis</h2>
<p>For more information, please see:</p>
<ul>
<li>The <a href="https://jrosen48.github.io/konfound/articles/Introduction_to_konfound.html">Introduction to konfound vignette</a>, with detailed information about each of the functions (<code><a href="reference/pkonfound.html">pkonfound()</a></code>, <code><a href="reference/konfound.html">konfound()</a></code>, and <code>mkounfound()</code>)</li>
<li>The causal inference section of Ken Frank’s website <a href="https://msu.edu/~kenfrank/research.htm#causal">here</a>
</li>
<li>The <a href="https://jmichaelrosenberg.shinyapps.io/shinykonfound/">konfound interactive web application</a>, with links to PowerPoints and key publications</li>
</ul>
</div>
<div id="feedback-issues-and-feature-requests" class="section level2">
<h2 class="hasAnchor">
<a href="#feedback-issues-and-feature-requests" class="anchor"></a>Feedback, issues, and feature requests</h2>
<p>We prefer for issues to be filed via GitHub (link to the issues page for konfound <a href="https://github.com/jrosen48/konfound/issues">here</a>) though we also welcome questions or feedback via <a href="jrosen@msu.edu">email</a>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that this project is released with a Contributor Code of Conduct available at <a href="http://contributor-covenant.org/version/1/0/0/" class="uri">http://contributor-covenant.org/version/1/0/0/</a></p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li><p>Frank, K.A., Maroulis, S., Duong, M., and Kelcey, B. 2013. What would it take to Change an Inference?: Using Rubin’s Causal Model to Interpret the Robustness of Causal Inferences. Education, Evaluation and Policy Analysis. Vol 35: 437-460. <a href="https://msu.edu/~kenfrank/What%20would%20it%20take%20to%20Change%20an%20Inference%20published.docx">https://msu.edu/~kenfrank/What%20would%20it%20take%20to%20Change%20an%20Inference%20published.docx</a></p></li>
<li><p>Frank, K.A., Gary Sykes, Dorothea Anagnostopoulos, Marisa Cannata, Linda Chard, Ann Krause, Raven McCrory. 2008. Extended Influence: National Board Certified Teachers as Help Providers. Education, Evaluation, and Policy Analysis. Vol 30(1): 3-30. <a href="https://msu.edu/~kenfrank/papers/Does%20NBPTS%20Certification%20Affect%20the%20Number%20of%20Colleagues%20a%20Teacher%20Helps%20with%20Instructional%20Matters%20acceptance%20version%202.doc">https://msu.edu/~kenfrank/papers/Does%20NBPTS%20Certification%20Affect%20the%20Number%20of%20Colleagues%20a%20Teacher%20Helps%20with%20Instructional%20Matters%20acceptance%20version%202.doc</a></p></li>
<li><p>Frank, K. A. and Min, K. 2007. Indices of Robustness for Sample Representation. Sociological Methodology. Vol 37, 349-392. <a href="https://msu.edu/~kenfrank/papers/INDICES%20OF%20ROBUSTNESS%20TO%20CONCERNS%20REGARDING%20THE%20REPRESENTATIVENESS%20OF%20A%20SAMPLE.doc">https://msu.edu/~kenfrank/papers/INDICES%20OF%20ROBUSTNESS%20TO%20CONCERNS%20REGARDING%20THE%20REPRESENTATIVENESS%20OF%20A%20SAMPLE.doc</a> *co first authors.</p></li>
<li><p>Frank, K. 2000. “Impact of a Confounding Variable on the Inference of a Regression Coefficient.” Sociological Methods and Research, 29(2), 147-194 <a href="https://msu.edu/~kenfrank/papers/impact%20of%20a%20confounding%20variable.pdf">https://msu.edu/~kenfrank/papers/impact%20of%20a%20confounding%20variable.pdf</a></p></li>
</ul>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joshua M Rosenberg <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joshua M Rosenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
